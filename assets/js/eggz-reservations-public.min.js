!function(e){"use strict";e(function(){function a(){e(".eggz-reservations-details").validate({rules:{send_reservation_date:{required:!0},send_reservation_time:{required:!0},send_reservation_persons:{required:!0},send_reservation_name:{required:!0},send_reservation_email:{required:!0},send_reservation_phone:{required:!0}}}),e(".eggz-reservations-details").on("click","#add-a-reservation-trigger",function(a){if(a.preventDefault(),e(".eggz-reservations-details").valid()){var t=e(".send-reservation-date").val(),i=e(".send-reservation-time").val(),r=e(".send-reservation-persons").val(),o=e(".send-reservation-phone").val(),n=e(".send-reservation-full-name").val(),d=e(".send-reservation-email").val(),s=e(".send-reservation-special-request").val();e.ajax({method:"POST",url:POST_SUBMITTER.ajax_url,type:"post",data:{action:"eggz_add_reservation",title:n,name:n,date:t,time:i,persons:r,phone:o,email:d,request:s,nonce:POST_SUBMITTER.nonce},success:function(a){e(".reservations-form").append(a),"undefined"!=TweenLite&&TweenLite.to(window,2.5,{scrollTo:{y:e(".eggz-show-reservation-details-wrap").offset().top-e(".header-primary").height()},ease:Power4.easeOut}),e(".eggz-reservation-details-wrap").css("opacity",".5").css("pointer-events","none"),"function"==typeof jarallax&&e(".parallax").jarallax("destroy").jarallax({speed:.2})},fail:function(e){}})}})}var t=parseInt(POST_SUBMITTER.date_picker_days),i=POST_SUBMITTER.open_hours;e("#datepicker").datetimepicker({useCurrent:!0,stepping:15,format:"MM/DD/YYYY",allowInputToggle:!0,minDate:moment({hour:10,minute:0,seconds:0}),maxDate:moment().add(t,"days").hour(24)}),e("#timepicker").datetimepicker({useCurrent:!0,stepping:15,format:"hh:mm a",allowInputToggle:!0}),e("#datepicker").on("dp.show",function(a){e("#timepicker").data("DateTimePicker").destroy(),e("#timepicker").datetimepicker({useCurrent:!1,stepping:15,allowInputToggle:!0,format:"hh:mm a"}),e("#timepicker").data("DateTimePicker").hide()}).on("dp.hide",function(a){e("#timepicker").data("DateTimePicker").show()}).on("dp.change",function(a){var t=i[moment(a.date).day()].open,r=i[moment(a.date).day()].close;t=void 0==t?10:moment(t,["h:mm A"]).format("H"),r=void 0==r?22:moment(r,["h:mm A"]).format("H"),moment(a.date).date()==moment(new Date).date()?moment(new Date).hour()>=r?alert("We are goin' to close for today. Please make the reservation for another day."):(e("#timepicker").data("DateTimePicker").defaultDate(moment(a.date).format("hh:mm A")),e("#timepicker").data("DateTimePicker").date(moment(a.date)),e("#timepicker").data("DateTimePicker").minDate(moment(a.date)),e("#timepicker").data("DateTimePicker").maxDate(moment(a.date).hour(r).minute(0).second(0))):(e("#timepicker").data("DateTimePicker").date(moment(a.date).hour(t).minute(0).second(0)),e("#timepicker").data("DateTimePicker").maxDate(moment(a.date).hour(r).minute(0).second(0)),e("#timepicker").data("DateTimePicker").minDate(moment(a.date).hour(t).minute(0).second(0))),e("#timepicker").data("DateTimePicker").hide()}),e(".add-reservation-form").validate({rules:{datepicker:{required:!0},timepicker:{required:!0},personspicker:{required:!0}}}),e(".reservations-form").on("click","#book-a-table-trigger",function(t){if(t.preventDefault(),e(".add-reservation-form").valid()){var i=e(".add-reservation-name").val(),r=e("#datepicker input").val(),o=e("#timepicker input").val(),n=e(".personspicker button").attr("title"),d=e(".add-reservation-special-requests").val();e.ajax({method:"POST",url:POST_SUBMITTER.ajax_url,type:"post",data:{action:"eggz_reservation_details",title:i,date:r,time:o,persons:n,special_requests:d,nonce:POST_SUBMITTER.nonce},success:function(t){e(".reservations-form").off("click","#book-a-table-trigger"),e(".reservations-form").append(t),"undefined"!=TweenLite&&TweenLite.to(window,2.5,{scrollTo:{y:e(".eggz-reservation-details-wrap").offset().top-e(".header-primary").height()},ease:Power4.easeOut}),e(".add-reservation-form").css("opacity",".5").css("pointer-events","none"),"function"==typeof jarallax&&e(".parallax").jarallax("destroy").jarallax({speed:.2}),a()},fail:function(e){alert("Reservation was not created. :()")}})}});var r=e(".reservation-content");e(".eggz-reservation-trigger").on("click",function(a){a.preventDefault(),e(".eggz-reservation-details").slideUp("fast"),e(".reservation-content").removeClass("open"),e(this).parents(".reservation-content").find(".eggz-reservation-details").slideToggle("fast"),e(this).parents(".reservation-content").addClass("open")}),e(window).on("click.Bst",function(a){return 0!=r.has(a.target).length||r.is(a.target)?!1:(e(".eggz-reservation-details").fadeOut("fast"),void e(".reservation-content").removeClass("open"))}),e(".selectpicker").selectpicker({}),e(".reservations-filters li").on("click tap",function(a){a.preventDefault(),e(".reservation-box").hide(),e("."+e(this).data("type")).show(),e(this).siblings().removeClass("active").addClass("active")}),e(".eggz-reservations-sort-order select").on("change",function(){switch(e(this).val()){case"latest":e(".reservation-box").sort(function(a,t){return parseInt(e(t).data("time"))<parseInt(e(a).data("time"))?1:-1}).appendTo(".eggz-reservations-list");break;case"oldest":e(".reservation-box").sort(function(a,t){return parseInt(e(t).data("time"))>parseInt(e(a).data("time"))?1:-1}).appendTo(".eggz-reservations-list");break;case"ulast":e(".reservation-box").sort(function(a,t){return e(t).data("table").toUpperCase()>e(a).data("table").toUpperCase()?1:-1}).appendTo(".eggz-reservations-list");break;case"ufirst":e(".reservation-box").sort(function(a,t){return e(t).data("table").toUpperCase()<e(a).data("table").toUpperCase()?1:-1}).appendTo(".eggz-reservations-list")}}),e(".eggz-reservations").on("change",".reservation-heading-box select",function(){var a=e(this).data("postid"),t=e(this).data("table"),i=e(this).find("option:selected").val();e.ajax({method:"POST",url:POST_SUBMITTER.ajax_url,data:{action:"eggz_set_reservation_table",id:a,table:i},success:function(r){"0"==r.error.code?e("#demoModal").modal("show"):e(".eggz-reservations-list").find('[data-postid="'+a+'"]').removeClass("unassigned").removeClass(t).addClass(i).data("table",i)}})}),e("#editReservationModal").on("show.bs.modal",function(a){var t=e(a.relatedTarget),i=e(this);i.find(".date").text(t.data("date")),i.find(".modal-body input#reservation-id").val(t.data("id")),i.find(".modal-body input#date").val(t.data("date")),i.find(".modal-body input#time").val(t.data("time")),i.find(".modal-body input#persons").val(t.data("persons")),i.find(".modal-body input#email").val(t.data("email")),i.find(".modal-body input#phone").val(t.data("phone")),i.find(".modal-body input#name").val(t.data("name")),i.find(".modal-header .eggz-reservations-title").text(t.data("name")),i.find(".modal-body textarea#specialrequest").val(t.data("specialrequests")),i.find(".modal-body input#date").datetimepicker({useCurrent:!0,stepping:15,format:"MM/DD/YYYY",allowInputToggle:!0}),i.find(".modal-body input#time").datetimepicker({useCurrent:!1,stepping:15,format:"hh:mm a",allowInputToggle:!0}),i.find(".edit-reservation-modal-save").on("click tap",function(a){if(a.preventDefault(),i.find("form").valid()){i.find(".eggz-abs-loader").show(),i.find("form").css("opacity",".5");var t=i.find(".modal-body input#reservation-id").val(),r=i.find(".modal-body input#date").val(),o=i.find(".modal-body input#time").val(),n=i.find(".modal-body input#persons").val(),d=i.find(".modal-body input#email").val(),s=i.find(".modal-body input#phone").val(),l=i.find(".modal-body input#name").val(),m=i.find(".modal-body input#specialrequests").val();e.ajax({url:POST_SUBMITTER.ajax_url,method:"POST",data:{action:"eggz_update_reservation",id:t,date:r,time:o,persons:n,email:d,phone:s,name:l,request:m},success:function(a){if("0"==a.error.code)i.find(".eggz-abs-loader").hide(),e("#editReservationModal").modal("hide"),e("#demoModal").modal("show");else{i.find(".eggz-abs-loader").hide(),i.find("form").css("opacity","1");var t=i.find(".modal-body input#reservation-id").val();e('[data-postid="'+t+'"] .eggz-reservations-date').text(i.find(".modal-body input#date").val()),e('[data-postid="'+t+'"] .eggz-reservations-reservation-date.field-value').text(i.find(".modal-body input#date").val()),e('[data-postid="'+t+'"] .eggz-reservations-reservation-time.field-value').text(i.find(".modal-body input#time").val()),e('[data-postid="'+t+'"] .eggz-reservations-reservation-persons.field-value').text(i.find(".modal-body input#persons").val()),e('[data-postid="'+t+'"] .eggz-reservations-reservation-email.field-value').text(i.find(".modal-body input#email").val()),e('[data-postid="'+t+'"] .eggz-reservations-reservation-phone.field-value').text(i.find(".modal-body input#phone").val()),e('[data-postid="'+t+'"] .eggz-reservations-reservation-name.field-value').text(i.find(".modal-body input#name").val()),e('[data-postid="'+t+'"] .eggz-reservations-reservation-specialrequest.field-value').text(i.find(".modal-body input#specialrequest").val()),e("#editReservationModal").modal("hide")}},fail:function(e){i.find(".eggz-abs-loader").hide(),i.find("form").css("opacity","1")}})}})});var o=!1;e("#deleteReservationModal").on("show.bs.modal",function(a){var t=e(a.relatedTarget),i=e(this);i.find(".reservation-id").val(t.data("id")),i.find(".delete-all-reservations").val(t.data("delete-all")),t.data("delete-all")?(o=!0,i.find("p").hide(),i.find("p.delete-all-reservations-message").show()):(o=!1,i.find("p").hide(),i.find("p.delete-single-reservation-message").show())}).on("click tap",".yes",function(a){a.preventDefault();var t=e(this).parent().parent().find(".reservation-id").val();e.ajax({url:POST_SUBMITTER.ajax_url,method:"POST",data:{action:"eggz_delete_reservation",deleteall:o,id:t},success:function(a){"0"==a.error.code?(e("#deleteReservationModal").modal("hide"),e("#demoModal").modal("show")):(o?e(".eggz-reservations-list").empty():e(".eggz-reservations-list").find('[data-postid="'+t+'"]').remove(),e("#deleteReservationModal").modal("hide"))}})})})}(jQuery);